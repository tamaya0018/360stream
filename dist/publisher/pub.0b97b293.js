var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequirefbea;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequirefbea=o);var a=o("hlpVk");let i,c;const l=document.getElementById("local-video"),d=document.getElementById("camera-list"),r=document.getElementById("list-button"),s=document.getElementById("join-button"),u=document.getElementById("publish-button");r.onclick=()=>{navigator.mediaDevices.enumerateDevices().then((e=>{e.filter((e=>"videoinput"===e.kind)).forEach((e=>{console.log(e.kind+": "+e.label+" id = "+e.deviceId);const t=document.createElement("option");t.value=e.deviceId,t.text=e.label,d.appendChild(t)}))})).catch((e=>{console.log(e.name+": "+e.message)}))},d.onchange=async()=>{console.log(d.value),c=await a.SkyWayStreamFactory.createCameraVideoStream({deviceId:d.value}),c.attach(l),await l.play()},s.onclick=async()=>{const e=document.getElementById("room-name"),t=document.getElementById("my-id");if(""===e.value)return;const n=await a.SkyWayContext.Create(new(0,a.SkyWayAuthToken)({jti:(0,a.uuidV4)(),iat:(0,a.nowInSec)(),exp:(0,a.nowInSec)()+86400,scope:{app:{id:"1194851a-7721-4348-951a-f502fd4dccb3",turn:!0,actions:["read"],channels:[{id:"*",name:"*",actions:["write"],members:[{id:"*",name:"*",actions:["write"],publication:{actions:["write"]},subscription:{actions:["write"]}}],sfuBots:[{actions:["write"],forwardings:[{actions:["write"]}]}]}]}}}).encode("zufyzTSf6JdsD1m4feyiG8id/aju8Hyh7ROgcyHeHKY=")),o=await a.SkyWayRoom.FindOrCreate(n,{type:"p2p",name:e.value});i=await o.join(),t.textContent=i.id},u.onclick=()=>{i.publish(c).then((()=>{console.log("publish success!")}))};
//# sourceMappingURL=pub.0b97b293.js.map
