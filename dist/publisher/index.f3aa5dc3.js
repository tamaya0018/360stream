var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequirefbea;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},e.parcelRequirefbea=n);var i=n("hlpVk"),a=n("1C0k0");const c={previewVideo:async function(e){this.video=await i.SkyWayStreamFactory.createCameraVideoStream({deviceId:this.cameraList.value}),this.video.attach(e),await e.play()},publishVideo:function(){this.myInfo.publish(this.video).then((()=>{console.log("publish success!")}))}};function l(e,t){a.Member.call(this,e),this.cameraList=t}function r(e,t){navigator.mediaDevices.enumerateDevices().then((o=>{o.filter((e=>e.kind===t)).forEach((t=>{const o=document.createElement("option");o.value=t.deviceId,o.text=t.label,e.appendChild(o)}))})).catch((e=>{console.log(e.name+": "+e.message)}))}l.prototype=Object.create(a.Member.prototype),l.prototype.constructor=l,Object.assign(l.prototype,c);const d=document.getElementById("my-id"),s=document.getElementById("local-video"),u=document.getElementById("camera-list"),p=document.getElementById("audio-list"),m=document.getElementById("list-button"),y=document.getElementById("publish-button");(async()=>{const e=new l(new URLSearchParams(window.location.search).get("room"),u);await e.initMyContext(),d.textContent=e.myInfo.id,m.onclick=()=>{r(p,"audioinput"),r(u,"videoinput")},y.onclick=async()=>{await e.publishVideo()},u.onchange=async()=>{await e.previewVideo(s)}})();
//# sourceMappingURL=index.f3aa5dc3.js.map
