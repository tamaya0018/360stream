var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},o=e.parcelRequirefbea;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in i){var o=i[e];delete i[e];var n={id:e,exports:{}};return t[e]=n,o.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},e.parcelRequirefbea=o);var n=o("hlpVk"),a=o("1C0k0");const c={previewVideo:async function(e){this.video=await n.SkyWayStreamFactory.createCameraVideoStream({deviceId:this.cameraList.value}),this.video.attach(e),await e.play()},publishVideo:function(){this.myInfo.publish(this.video).then((()=>{console.log("publish success!")}))},previewAudio:async function(){this.mic=await n.SkyWayStreamFactory.createMicrophoneAudioStream({deviceId:this.audioList.value})},publishAudio:function(){this.myInfo.publish(this.mic).then((()=>{console.log("publish success!")}))}};function s(e,t,i){a.Member.call(this,e),this.cameraList=t,this.audioList=i}function d(e,t){navigator.mediaDevices.enumerateDevices().then((i=>{i.filter((e=>e.kind===t)).forEach((t=>{const i=document.createElement("option");i.value=t.deviceId,i.text=t.label,e.appendChild(i)}))})).catch((e=>{console.log(e.name+": "+e.message)}))}s.prototype=Object.create(a.Member.prototype),s.prototype.constructor=s,Object.assign(s.prototype,c);const l=document.getElementById("my-id"),r=document.getElementById("local-video"),u=document.getElementById("camera-list"),p=document.getElementById("audio-list"),m=document.getElementById("list-button"),h=document.getElementById("publish-video-button"),y=document.getElementById("publish-audio-button");(async()=>{const e=new s(new URLSearchParams(window.location.search).get("room"),u,p);await e.initMyContext(),l.textContent=e.myInfo.id,m.onclick=()=>{d(p,"audioinput"),d(u,"videoinput")},h.onclick=async()=>{await e.publishVideo()},y.onclick=async()=>{await e.publishAudio()},u.onchange=async()=>{await e.previewVideo(r)},p.onchange=async()=>{await e.previewAudio()}})();
//# sourceMappingURL=index.a7ae138f.js.map
